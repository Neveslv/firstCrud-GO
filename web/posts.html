<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Posts - CRUD Go</title>
    <link rel="stylesheet" href="/static/style.css">
    <script src="/static/main.js"></script>
</head>
<body>

<aside class="app-sidebar">
    <div class="brand"><span>GO</span>BLOGs</div>
    <ul class="nav-links">
        <li class="nav-item"><a href="/"> Dashboard </a></li>
        <li class="nav-item"><a href="/usuarios"> Usu√°rios </a></li>
        <li class="nav-item"><a href="/posts" class="active"> Posts </a></li>
    </ul>
</aside>

<main class="main-content">
    <header class="page-header">
        <div class="page-title">
            <h1>Posts</h1>
            <p>Conte√∫do publicado</p>
        </div>
        <a href="/posts/novo" class="btn btn-primary">‚ûï Novo Post</a>
    </header>

    {{if .posts}}
    <div class="dashboard-grid">
        {{range .posts}}
        <div class="post-card">
            <h3>{{.Titulo}}</h3>
            <p>{{if gt (len .Content) 100}}{{slice .Content 0 100}}...{{else}}{{.Content}}{{end}}</p>
            <div style="margin-top: 15px; font-size: 0.85rem; color: var(--text-muted);">
                <strong>{{.UserName}}</strong> ‚Ä¢ {{.CreatedAt.Format "02/01/2006"}}
            </div>

            <div style="margin-top: 20px; display: flex; gap: 10px; flex-wrap: wrap;">
                <a href="/posts/{{.ID}}/detalhes" class="btn btn-back" style="font-size: 0.8rem;">üí¨ Coment√°rios</a>

                <form action="/api/posts/{{.ID}}" method="POST" class="inline-form" onsubmit="return confirm('Deletar post?');">
                    <input type="hidden" name="_method" value="DELETE">
                    <button type="submit" class="btn btn-danger" style="padding: 8px 12px; font-size: 0.8rem;">üóëÔ∏è</button>
                </form>
            </div>
        </div>
        {{end}}
    </div>
    {{else}}
    <div class="post-card" style="text-align: center;">
        <p>Nenhum post publicado.</p>
        <br>
        <a href="/posts/novo" class="btn btn-primary">Criar Primeiro Post</a>
    </div>
    {{end}}
</main>
</body>
</html>